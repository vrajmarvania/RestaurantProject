<!doctype html>
<html lang="en">
<head>
    {% load static %}
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
          integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

    <title>New Order</title>
    <style>body#a {
    background-color: #00000021;
}
    body {

    background-color: #b5b5b554;
}
    .card {
    border-left: 0.45rem solid #4e73df!important;
}html {
    background-color: #ededed;
}.card {
    border-radius: 1.35rem;
}
    h3#N {
    color: white;
}
#tab_logic .form-control[readonly],#tab_logic_total .form-control[readonly] {
    border: 0;
    background: transparent;
    box-shadow: none;
    padding: 0 10px;
    font-size: 15px;
}
h3{
    font-size: 24px;
    color: white;
}

body {

    background-color: #f8f9fc;
}
nav.navbar.navbar-dark.bg-dark {
    background-color: #428bca;
    background-image: linear-gradient(
180deg
 ,#428bca 10%,#428bca 100%);
    background-size: cover;
}

    </style>
</head>
<body id="a">
<nav class="navbar navbar-dark bg-dark">

    <h3 id="N" name="Rn"> Restorent :- {{Restorent}} Hotel</h3>
</nav>
<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<!------ Include the above in your HEAD tag ---------->



        <div class="container">


<div class="card" style="width: 100%;">
    <div class="card-body">


            <form action="/Norder/{{Restorent}}" method="POST">{% csrf_token %}
                <div class="row clearfix">

                    <div class="col-md-12">
                        <table class="table table-bordered table-hover" id="tab_logic">
                            <thead>
                            <tr>

                                <th class="text-center"> ProductName</th>
                                <th class="text-center"> Price</th>
                                <th class="text-center"> Qty</th>
                                <th class="text-center"> Total</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for Food in Foods %}
                            <tr id='addr0'>

                                <td><input type="text" name="{{Food.FoodName}}Name" value="{{Food.FoodName}}"
                                           class="form-control " step="0.00" min="0" readonly/></td>

                                <td><input type="number" name='{{Food.FoodName}}price' value="{{Food.FoodPrice}}"
                                           class="form-control price" step="0.00" min="0" readonly/></td>
                                <td><input type="number" name='{{Food.FoodName}}qty' class="form-control qty"
                                           step="0"
                                           min="0"/></td>
                                <td><input type="number" name='{{Food.FoodName}}QP' placeholder='0.00'
                                           class="form-control total" readonly/>
                                </td>

                                <!--          <td><input type="text" name='product[]'  placeholder='Enter Product Name' class="form-control"/></td>-->
                                <!--            <td><input type="number" name='qty[]' placeholder='Enter Qty' class="form-control qty" step="0" min="0"/></td>-->
                                <!--            <td><input type="number" name='price[]' placeholder='Enter Unit Price' class="form-control price" step="0.00" min="0"/></td>-->
                                <!--            <td><input type="number" name='total[]' placeholder='0.00' class="form-control total" readonly/></td>-->


                            </tr>
                            <tr id='addr1'></tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>

                </div>
                <!--  <div class="row clearfix">-->
                <!--    <div class="col-md-12">-->
                <!--      <button id="add_row" class="btn btn-default pull-left">Add Row</button>-->
                <!--      <button id='delete_row' class="pull-right btn btn-default">Delete Row</button>-->
                <!--    </div>-->
                <!--  </div>-->
                <div class="row clearfix" style="margin-top:20px">
                    <div class="pull-right col-md-4">
                        <table class="table table-bordered table-hover" id="tab_logic_total">
                            <tbody>
                            <!--          <tr>-->
                            <!--            <th class="text-center">Sub Total</th>-->
                            <!--            <td class="text-center"><input type="number" name='sub_total' placeholder='0.00' class="form-control" id="sub_total" readonly/></td>-->
                            <!--          </tr>-->
                            <!--          <tr>-->
                            <!--            <th class="text-center">Tax</th>-->
                            <!--            <td class="text-center"><div class="input-group mb-2 mb-sm-0">-->
                            <!--                <input type="number" class="form-control" id="tax" placeholder="0">-->
                            <!--                <div class="input-group-addon">%</div>-->
                            <!--              </div></td>-->
                            <!--          </tr>-->
                            <!--          <tr>-->
                            <!--            <th class="text-center">Tax Amount</th>-->
                            <!--            <td class="text-center"><input type="number" name='tax_amount' id="tax_amount" placeholder='0.00' class="form-control" readonly/></td>-->
                            <!--          </tr>-->
                            <!--          <tr>-->
                            <th class="text-center">Grand Total</th>
                            <td class="text-center"><input type="number" name='Total_Amount' id="total_amount"
                                                           placeholder='0.00'
                                                           class="form-control" readonly/></td>
                            </tr>
                            </tbody>
                        </table>
                        <button type="submit" onclick="myFunction()" class="btn btn-primary btn-user btn-block">
                            Order
                        </button>
                        <button onclick="ok" class="btn btn-primary btn-user btn-block">
                            Home
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>



<br >

            <div class="h5 mb-0 font-weight-bold text-gray-800">All restaurent Orders:</div>

<br>
<div class="mb-4">
    <div class="card border-left-warning shadow h-100 py-2">
        <div class="container-fluid">

        </div>
        <div class="row">
            <div class="col">

                    <div class="card-body">
                        <div class="table-responsive">
                            <table id="example" class="display table-responsive-xl" style="min-width: 845px">
                                <thead>
                                <tr>
                                    <th scope="col">ID</th>
                                    <th scope="col">Restorent Name</th>
                                    <th scope="col">Delivery Date</th>
                                    <th scope="col">Price</th>
                                    <th scope="col">Status</th>
                                </tr>
                                </thead>
                                <tbody>

                                {% for i in Ro %}


                                <tr>
                                    <td>{{i.OId}}</td>
                                    <td>{{i.RestaurantName}}</td>
                                    <td>{{i.ODate}}</td>
                                    <td>â‚¹{{i.TPrice}}</td>
                                    <td><span class="badge mb-2 mb-xl-0 badge-success">Success</span>
                                    </td>
                                </tr>


                                {% endfor %}

                                </tbody>
                            </table>
                        </div>
                    </div>

            </div>
        </div>
    </div>
</div>
</div>
</div>

<script>
$(document).ready(function(){

	option_list('addr0');

    var i=1;
    $("#add_row").click(function(){b=i-1;
      	$('#addr'+i).html($('#addr'+b).html()).find('td:first-child').html(i+1);
      	$('#tab_logic').append('<tr id="addr'+(i+1)+'"></tr>');
		option_list('addr'+i);
      	i++;
  	});
    $("#delete_row").click(function(){
    	if(i>1){
		$("#addr"+(i-1)).html('');
		i--;
		}
		calc();
	});

	$(".product").on('change',function(){
	    option_checker(this)
	});


	$('#tab_logic tbody').on('keyup change',function(){
		calc();
	});
	$('#tax').on('keyup change',function(){
		calc_total();
	});

});

function option_checker(id)
{
	var myOption=$(id).val();
	var s =0;
	$('#tab_logic tbody tr select').each(function(index, element){
         var myselect = $(this).val();
		if(myselect==myOption){
			s += 1;
		}
    });
	if(s>1){
		alert(myOption+' as been added already try new..')
	}
}

function option_list(id)
{
	el='#'+id;
	var myArray = ["Product 1", "Product 2", "Product 3", "Product 4"];
	var collect = '<option value="">Select Product</option>';
    for(var i = 0; i<myArray.length;i++){
        collect += '<option value="'+myArray[i]+'">'+myArray[i]+'</option>';
    }
    $(el+" select").html(collect);
}

<!--function calc()-->
<!--{-->
<!--	$('#tab_logic tbody tr').each(function(i, element) {-->
<!--		var html = $(this).html();-->

<!--			var qty = $(this).find('.qty').val();-->
<!--			var pri = $(this).find('.price').val();-->

<!--			$(this).find('.total').val(qty*price);-->
<!--&lt;!&ndash;			&ndash;&gt;-->
<!--&lt;!&ndash;			var qty = $(this).find('.qty').val();&ndash;&gt;-->
<!--&lt;!&ndash;			var price = $(this).find('.price').val();&ndash;&gt;-->
<!--&lt;!&ndash;			$(this).find('.total').val(qty*price);&ndash;&gt;-->


<!--			calc_total();-->
<!--    });-->
<!--}-->
function calc()
{
	$('#tab_logic tbody tr').each(function(i, element) {
		var html = $(this).html();
		if(html!='')
		{
			var qty = $(this).find('.qty').val();
			var price = $(this).find('.price').val();
			$(this).find('.total').val(qty*price);

			calc_total();
		}
    });
}


function calc_total()
{
	total=0;
	$('.total').each(function() {
        total += parseInt($(this).val());
    });


	$('#total_amount').val(total.toFixed(2));
}
function myFunction() {
  alert("Order is submited..!");
}

















</script>

<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
        integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
        crossorigin="anonymous"></script>
</body>
</html>
